!function(e){function t(t){for(var r,o,c=t[0],i=t[1],u=t[2],m=0,f=[];m<c.length;m++)o=c[m],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&f.push(a[o][0]),a[o]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);for(s&&s(t);f.length;)f.shift()();return l.push.apply(l,u||[]),n()}function n(){for(var e,t=0;t<l.length;t++){for(var n=l[t],r=!0,c=1;c<n.length;c++){var i=n[c];0!==a[i]&&(r=!1)}r&&(l.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={0:0},l=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var c=window.webpackJsonp=window.webpackJsonp||[],i=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var s=i;l.push([213,1]),n()}({181:function(e,t,n){},187:function(e,t,n){},188:function(e,t,n){},210:function(e,t,n){},211:function(e,t,n){},212:function(e,t,n){},213:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),l=n(170),o=n(174),c=n(117),i=n(31);n(181);function u(){var e=a.a.createElement(a.a.Fragment,null,"A website to more easily upload event/gacha stories from the mobile idol game Twisted Wonderland to the fandom wiki.",a.a.createElement("br",null),'It formats your story chapter into text that can be pasted directly into the "source" section of the page.',a.a.createElement("br",null),"Developed by ",a.a.createElement("a",{target:"_blank",rel:"noreferrer",href:"https://twitter.com/gayandasleep"},"midori")," (last updated ".concat("5/8/21",")."));return a.a.createElement("header",null,a.a.createElement("h1",null,a.a.createElement(c.b,{className:"star-link",to:"/"},"TWISTED WONDERLAND STORY FORMATTER")),a.a.createElement("div",{className:"horizontal"},a.a.createElement("p",null,e),a.a.createElement("ul",{id:"navbar"},a.a.createElement("li",null,a.a.createElement(c.b,{className:"star-link",to:"/howto"},"HOW TO USE")),a.a.createElement("li",null,a.a.createElement("a",{className:"star-link",target:"_blank",rel:"noreferrer",href:"https://github.com/myang5/twst-wiki-parser/issues"},"KNOWN ISSUES")),a.a.createElement("li",null,a.a.createElement("a",{className:"star-link",target:"_blank",rel:"noreferrer",href:"https://twitter.com/gayandasleep"},"CONTACT")),a.a.createElement("li",null,a.a.createElement("a",{className:"star-link",target:"_blank",rel:"noreferrer",href:"https://github.com/myang5/twst-wiki-parser"},"GITHUB")))))}var s,m={RIDDLE:"Riddle Rosehearts",ACE:"Ace Trappola",DEUCE:"Deuce Spade",CATER:"Cater Diamond",TREY:"Trey Clover",LEONA:"Leona Kingscholar",JACK:"Jack Howl",RUGGIE:"Ruggie Bucchi",AZUL:"Azul Ashengrotto",JADE:"Jade Leech",FLOYD:"Floyd Leech",KALIM:"Kalim Al-Asim",JAMIL:"Jamil Viper",VIL:"Vil Schoenheit",EPEL:"Epel Felmier",ROOK:"Rook Hunt",IDIA:"Idia Shroud",ORTHO:"Ortho Shroud",MALLEUS:"Malleus Draconia",SEBEK:"Sebek Zigvolt",SILVER:"Silver",LILIA:"Lilia Vanrouge",GRIM:"Grim",CROWLEY:"Dire Crowley",CREWEL:"Divus Crewel",TREIN:"Mozus Trein",VARGAS:"Ashton Vargas",SAM:"Sam",CHENYA:"Chen'nya",CHEKA:"Cheka",MIRROR:"Dark Mirror",LUCIUS:"Lucius"},f="storyType",p="translator",d="tlLink",h="title",b="featuredCharacter",E={PERSONAL_STORY:"Personal Story"},y={HEADING:"HEADING",LOCATION:"LOCATION"},g=n(70),v=Object(g.pick)(m,["ACE","AZUL","CATER","DEUCE","EPEL","FLOYD","GRIM","IDIA","JACK","JADE","JAMIL","KALIM","LEONA","LILIA","MALLEUS","ORTHO","RIDDLE","ROOK","RUGGIE","SEBEK","SILVER","TREY","VIL"]);function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,l=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=(S(s={},f,E.PERSONAL_STORY),S(s,p,""),S(s,d,""),S(s,h,""),s),A=Object(r.createContext)(),C=function(e){var t=e.children,n=O(Object(r.useState)({}),2),l=n[0],o=n[1],c=Object(r.useRef)(l),i=O(Object(r.useState)(JSON.parse(localStorage.getItem("details"))||T),2),u=i[0],s=i[1],m=O(Object(r.useState)(JSON.parse(localStorage.getItem("nav"))||{}),2),f={renders:l,renderRef:c,setRenders:o,details:u,setDetails:s,nav:m[0],setNav:m[1],inputRef:Object(r.useRef)(null),tlNotesRef:Object(r.useRef)(null)};return a.a.createElement(A.Provider,{value:f},t)};n(187);function j(e){var t=e.tabs,n=e.clicked,r=e.onClick;return a.a.createElement("div",{className:"tab-menu"},t.map((function(e){return a.a.createElement("button",{type:"button",key:e,className:"tablink".concat(n===e?" active":""),onClick:function(){return r(e)}},e)})))}n(188);var L=n(172),N=n.n(L);function k(e){var t=e.clicked,n=e.value,r=e.children;return a.a.createElement("div",{className:N()("tab-content","tab-content--".concat(n.replace(" ","-").toLowerCase()),{"tab-content--active":t===n})},r)}var P=n(160),R=n.n(P),x=n(161),I=n(163),D=n(122),M=n(165),H=n(166),_=n(162),F=n(175),U=n(164),q=n(176);function B(e){var t=e.querySelectorAll("br");if(t.length>0){for(var n=t[0].parentNode,r=n.parentNode,a=0;a<t.length;a++){var l=new Range;if(l.setStart(t[a].parentNode,0),l.setEndBefore(t[a]),!l.collapsed){var o=document.createElement(n.tagName.toLowerCase());o.append(l.extractContents()),r.insertBefore(o,n)}t[a].remove()}0===n.innerHTML.length&&n.remove()}return e}function G(e){return(new DOMParser).parseFromString(e,"text/html")}var J=function(e){return Object(g.chain)(e).words().map((function(e){return Object(g.capitalize)(e)})).join(" ").value()},Y=Object.values(y);function W(){var e=Object(r.useContext)(A),t=e.renderRef,n=e.setRenders,l=e.inputRef,o={plugins:[I.a,D.a,M.a,H.a,_.a,U.a,q.a],toolbar:["bold","italic","link","|","undo","redo"],autosave:{save:function(e){var r=function(e){var t=B(G(e)),n=Array.from(t.querySelectorAll("p"),(function(e){return e.textContent})),r={};return n.forEach((function(e){if(e.includes(":")){var t=e.split(":")[0].trim();Object(g.includes)(Y,t.toUpperCase())||(r[J(t)]="")}})),r}(e.getData());Object.keys(r).forEach((function(e){r[e]=t.current[e]||""})),n(r)}}};return Object(r.useEffect)((function(){l.current.editor.editing.view.change((function(e){e.setAttribute("spellcheck","false",l.current.editor.editing.view.document.getRoot())}))}),[]),a.a.createElement(R.a,{editor:x.a,config:o,data:"<p>If this is your first time using the formatter, please check the <a href='/#/howto'>Text Guidelines</a> to make\n        sure your text is ready.</p>\n      <p>---EXAMPLE DIALOGUE---</p>\n      <p>Bg 64207.png</p>\n      <p>Location: Dwarfs’ Mine - Campsite</p>\n      <p>Heading: —Day 2: Camp Vargas.</p>\n      <p>Jamil: This is a line said by Jamil (the line starts with his name followed by a colon).</p>\n      <p>This is another line said by Jamil.</p>\n      <p>Floyd: This is a line said by Floyd instead <strong>with some emphasis.</strong></p>\n      <p>Some Random NPC: Hello",ref:l})}function V(){var e=Object(r.useContext)(A).tlNotesRef,t={plugins:[M.a,H.a,_.a,F.a,U.a,I.a,D.a],toolbar:["bold","italic","link","numberedList","|","undo","redo"]};return Object(r.useEffect)((function(){e.current.editor.editing.view.change((function(t){t.setAttribute("spellcheck","false",e.current.editor.editing.view.document.getRoot())}))}),[]),a.a.createElement(R.a,{editor:x.a,config:t,data:"<p>If this is your first time using the formatter, please check the <a href='./howto.html#tlNotesSection'>Text\n     Guidelines</a> for how to add translation notes.</p>",ref:e})}function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $=Object.values(E),Z=Object.keys(v).sort();function Q(){var e=Object(r.useContext)(A),t=e.details,n=e.setDetails,l=function(e){var r=e.target,a=r.id,l=r.value;n(X(X({},t),{},z({},a,l)))};return a.a.createElement(a.a.Fragment,null,a.a.createElement("h3",null,"Story Details"),a.a.createElement("div",{className:"tab-content__grid"},a.a.createElement("label",{htmlFor:f},"Story Type"),a.a.createElement("select",{type:"text",id:f,value:t[f],onChange:l},$.map((function(e){return a.a.createElement("option",{key:e,value:e},e)}))),a.a.createElement("span",null),a.a.createElement("div",{className:"row--half-width row--label-only"},a.a.createElement("label",{className:"label--small",id:"".concat(p,"-name-label")},"Name"),a.a.createElement("label",{className:"label--small",id:"".concat(d,"-credit-label")},"Credit link")),a.a.createElement("label",{id:"".concat(p,"-label")},"Translator"),a.a.createElement("div",{className:"row--half-width"},a.a.createElement("input",{type:"text","aria-labelledby":"".concat(p,"-label ").concat(p,"-name-label"),value:t[p],id:p,onChange:l}),a.a.createElement("input",{type:"text","aria-labelledby":"".concat(p,"-label ").concat(d,"-credit-label"),value:t[d],id:d,onChange:l})),a.a.createElement("label",{htmlFor:h},"Title"),a.a.createElement("input",{type:"text",id:h,value:t[h],onChange:l}),t[f]===E.PERSONAL_STORY&&a.a.createElement(a.a.Fragment,null,a.a.createElement("label",{htmlFor:b},"Character"),a.a.createElement("select",{type:"text",id:b,value:t[b],onChange:l},a.a.createElement("option",{disabled:!0,value:!0},"- Select a character -"),Z.map((function(e){return a.a.createElement("option",{key:e,value:e},v[e])}))))))}function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,l=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return te(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){ae(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function le(){var e=Object(r.useContext)(A),t=e.renderRef,n=e.renders,l=e.setRenders,o=function(e){var r=re(re({},n),{},ae({},e.target.id,e.target.value));t.current=r,l(r)};return a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,"Please paste in the Story Character template values for each character. Possible values can be found in the"," ",a.a.createElement("a",{target:"_blank",rel:"noreferrer",href:"https://twisted-wonderland.fandom.com/wiki/Template:Story_Character"},"template documentation")," ","(This tab will fill out once you paste dialogue into the Text tab).",a.a.createElement("br",null),a.a.createElement("strong",null,"Dialogue from characters with blank inputs will be formatted like NPCs.")),a.a.createElement("div",{className:"tab-content__grid"},Object.entries(n).map((function(e){var t=ee(e,2),n=t[0],r=t[1];return a.a.createElement(oe,{key:n,name:n,value:r,onChange:o})}))))}function oe(e){var t=e.name,n=e.value,r=e.onChange;return a.a.createElement(a.a.Fragment,null,a.a.createElement("label",{htmlFor:t},t),a.a.createElement("input",{id:t,onChange:r,value:n}))}function ce(){return a.a.createElement("div",{className:"tab-content__grid"},a.a.createElement("span",null),a.a.createElement("div",{className:"row--label-only"},a.a.createElement("label",{className:"label--small",htmlFor:"title"},"Arbitrary title needed to make citation links work")),a.a.createElement("label",{htmlFor:"title"},"Chapter Title"),a.a.createElement("input",{type:"text",id:"title"}),a.a.createElement("label",{className:"tab-content__tl-editor-label",htmlFor:"TL Notes"},"TL Notes"),a.a.createElement("div",{className:"tab-content__tl-editor"},a.a.createElement(V,null)))}function ie(e){return e.querySelectorAll("strong").forEach((function(e){e.replaceWith("'''".concat(e.textContent,"'''"))})),e.querySelectorAll("i").forEach((function(e){e.replaceWith("''".concat(e.textContent,"''"))})),e.querySelectorAll("a").forEach((function(e){e.replaceWith("[".concat(e.href," ").concat(e.textContent,"]"))})),e}function ue(e){var t=e.templates,n=e.renders,r=e.outputObj,a=e.storyType,l="";return function(e){var o=e.textContent.replace(/&nbsp;/g," ").trim();if(""===o)return o;if(function(e){for(var t=[".png",".gif",".jpg",".jpeg",".ico",".pdf",".svg"],n=0;n<t.length;n++)if(e.toLowerCase().endsWith(t[n]))return!0;return!1}(o))return l="",t.cgRender(o);if(function(e){return e.trim().match(/^PART \d/i)}(o))return r.partCount+=1,1===r.partCount?(r.output=r.output.replace(t.tabberHeaderPlaceholder(),t.tabberHeader()+t.firstPartLine()),""):(l="",(a===E.PERSONAL_STORY?t.personalStoryFooter():"")+t.tableEnd()+t.partLine(r.partCount)+t.tableStart());if(e.innerHTML=function(e){if(e.search(/\[\d+\]/)>0){var t=document.querySelector("#title").value;if(t.length>0)e.match(/\[\d+\]/g).forEach((function(n){var r=n.substring(n.indexOf("[")+1,n.indexOf("]")),a="<span id='".concat(t,"Ref").concat(r,"'>[[#").concat(t,"Note").concat(r,"|<sup>[").concat(r,"]</sup>]]</span>");e=e.replace(n,a)}));else document.querySelector(".error").innerHTML="WARNING: The formatter detected TL notes in the dialogue but no chapter title in the TL Notes tab. TL notes were not formatted."}return e}(e.innerHTML),!o.includes(":"))return"\n".concat(ie(e).innerHTML,"\n\n");var c=o.split(":")[0];if(c.trim().toUpperCase()===y.LOCATION)return l="",t.locationHeading(o.slice(o.indexOf(":")+1).trim());if(c.trim().toUpperCase()===y.HEADING)return l="",t.heading(o.slice(o.indexOf(":")+1).trim());var i=e.childNodes[0].textContent,u=i;(i=i.replace(c+":",""))===u&&(i=i.replace(c,"")),0===i.trim().length?e.childNodes[0].remove():e.childNodes[0].textContent=i;var s=ie(e).innerHTML.trim();if(c!==l){var m=J(l=c);return n[m]?t.dialogueLine(n[m],s):t.npcDialogueLine(l,s)}return"\n".concat(s,"\n\n")}}function se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,l=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return me(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function de(e){var t=e.inputData,n=e.tlNotesData,r=e.renders,a=e.details,l=e.onChangeDetails;!function(e){Object.entries(e).forEach((function(t){var n=se(t,2),r=n[0],a=n[1];e[r]=a.trim()}))}(a),l(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},a));var o=a[f],c=he(a),i=B(G(t));localStorage.setItem("details",JSON.stringify(a));var u=i.querySelectorAll("p"),s=o===E.PERSONAL_STORY?c.personalStoryHeader():"";s+=c.tabberHeaderPlaceholder();for(var p,d=0,h={output:s+=c.tableStart(),partCount:0},y=ue({templates:c,renders:r,outputObj:h,storyType:o}),g=0;g<u.length;g++){d+=(p=u[g].textContent).match(/\[\d+\]/g)?p.match(/\[\d+\]/g).length:0;var v=y(u[g]);h.output+=v}return s=h.output,d>0&&(s+=function(e,t){var n=document.querySelector("#title").value;if(n.length>0){var r=B(G(e)),a=[];if(r.body.firstChild){if(ie(r),"OL"===r.body.firstChild.tagName.toUpperCase()){var l=Array.from(r.querySelectorAll("li"));l=l.map((function(e){return e.textContent.replace(/&nbsp;/g," ").trim()})),a=l.filter((function(e){return e.trim().length>0}))}else{var o=Array.from(r.querySelectorAll("p"));a=o.reduce((function(e,t){var n=t.textContent.replace(/&nbsp;/g," ").trim();return isNaN(n[0])?n.length>0&&(e[e.length-1]+="\n".concat(n)):e.push(n.split(" ").slice(1).join(" ")),e}),[])}a.length!==t&&(document.querySelector(".error").innerHTML+="WARNING: The formatter detected an unequal number of TL markers and TL notes.");for(var c='|-\n| colspan="2"|',i="<span id='".concat(n,"NoteNUM'>NUM.[[#").concat(n,"RefNUM|↑]] TEXT</span><br />"),u=0;u<a.length;u++){var s=i.replace(/NUM/g,u+1);c+=s.replace("TEXT",a[u])}return c=c.replace(/<br \/>$/m,"\n")}}return""}(n,d)),s+=o===E.PERSONAL_STORY?c.personalStoryFooter():"",(s+=c.tableEnd()).includes(c.tabberHeaderPlaceholder())?s=s.replace(c.tabberHeaderPlaceholder(),""):s+=c.tabberFooter(),s+=function(e,t){var n=e[f],r=e[b],a="";return a+=n===E.PERSONAL_STORY?"\n[[Category:Personal Story]]":"",a+=r?"\n[[Category:".concat(m[r],"]]"):"",t.forEach((function(e){var t=m[e.toUpperCase()];a+=t?"\n[[Category:".concat(t," Appearances]]"):""})),a}(a,Object.keys(r))}var he=function(e){var t=e.featuredCharacter,n=e.translator,r=e.tlLink,a=e.title,l={personalStoryHeader:function(){return"{{Personal Story Tabs/".concat(Object(g.capitalize)(t),"}}\n{{FanTL|tl=[").concat(r," ").concat(n,']|story}}\n{| class="storytable imgfit" width="100%" style="text-align:left"\n|- id="Top"\n! colspan="3" |').concat(a,"\n|}\n")},tabberHeaderPlaceholder:function(){return"tabber-placeholder\n"},tabberHeader:function(){return'<div class="themedtabber imgtabber" align="center"><Tabber>\n'},firstPartLine:function(){return"Part 1=\n"},partLine:function(e){return"|-|Part ".concat(e,"=\n")},tableStart:function(){return'{| class="storytable imgfit" width="100%" style="text-align:left"\n'},cgRender:function(e){return'|-\n| colspan="3" |[[File:'.concat(e,"]]\n")},locationHeading:function(e){return'|-\n| colspan="3" class="secondaryheader"|'.concat(e,"\n")},heading:function(e){return'|-\n| colspan="3" style="text-align:center;padding:2em"|'.concat(e,"\n")},dialogueLine:function(e,t){return"|-\n|{{Story Character|".concat(e,'}}\n| colspan="2" |').concat(t,"\n")},npcDialogueLine:function(e,t){return'|-\n| class="character" style="padding:3em" |'.concat(e,'\n| colspan="2" |').concat(t,"\n")},choice:function(e,t){return'|-\n| colspan="2" class="choice" |'.concat(e,'\n| class="choice" width="50%" |').concat(t,"\n")},personalStoryFooter:function(){return'|-\n| colspan="3" class="bottomnav" |✦ [['.concat(m[t],'/Personal Story|Main]] ✦\n|-\n| colspan="3" style="text-align:center;" |[[#Top|Jump to top]]\n|-\n')},tableEnd:function(){return"|}\n"},tabberFooter:function(){return"</Tabber></div>\n"}};return l};n(210);function be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,l=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ee(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ye={TEXT:"Text",DETAILS:"Details",RENDERS:"Renders",TL_NOTES:"TL Notes"},ge=Object.values(ye);function ve(){var e=Object(r.useRef)(null);return a.a.createElement(C,null,a.a.createElement("div",{className:"main-page"},a.a.createElement(Oe,null),a.a.createElement(Te,{outputRef:e}),a.a.createElement("textarea",{className:"output",ref:e,spellCheck:!1})))}var Oe=function(){var e=be(Object(r.useState)(ye.TEXT),2),t=e[0],n=e[1];return a.a.createElement("div",{className:"input"},a.a.createElement(j,{tabs:ge,clicked:t,onClick:n}),a.a.createElement(k,{value:ye.TEXT,clicked:t},a.a.createElement(W,null)),a.a.createElement(k,{value:ye.DETAILS,clicked:t},a.a.createElement(Q,null)),a.a.createElement(k,{value:ye.RENDERS,clicked:t},a.a.createElement(le,null)),a.a.createElement(k,{value:ye.TL_NOTES,clicked:t},a.a.createElement(ce,null)))},we="Copy Output",Se="Copied",Te=function(e){var t=e.outputRef,n=Object(r.useContext)(A),l=n.nav,o=n.details,c=n.setDetails,i=n.renders,u=n.inputRef,s=n.tlNotesRef,m=be(Object(r.useState)(we),2),f=m[0],p=m[1],d=be(Object(r.useState)(""),2),h=d[0],b=d[1];return a.a.createElement("div",{className:"actions"},a.a.createElement("button",{type:"button",onClick:function(){p(we),b("");var e=de({inputData:u.current.editor.getData(),tlNotesData:s.current.editor.getData(),nav:l,renders:i,details:o,onChangeDetails:c});t.current.value=e},id:"convert-button"},"CONVERT"),a.a.createElement("button",{type:"button",onClick:function(){t.current.select(),document.execCommand("copy"),p(Se)},id:"copy-button"},f),a.a.createElement("p",{className:"error"},h))},Ae=n.p+"assets/1532b15ffd44033a159f2b3dd2ff1f30.png",Ce=n.p+"assets/30030dff0170af1d9b23fc785f2f5c48.png",je=n.p+"assets/41363047b9c5aeb65cf132742e14a61f.png";n(211);function Le(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"how-to-page"},a.a.createElement("h2",null,"TEXT GUIDELINES"),a.a.createElement("h3",null,"Text Tab"),a.a.createElement("p",null,"Copy and paste your translated chapter into the text box."),a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement("strong",null,"Background images")," - You can include whole-row images by inserting the EXACT file name (ex. Bg 10101.png) into the dialogue on its own line. A list of all background images can be found here:"," ",a.a.createElement("a",{href:"https://twisted-wonderland.fandom.com/wiki/Category:Story_Background_Images"},"Story Background Images")),a.a.createElement("li",null,a.a.createElement("strong",null,"Headings"),' - You can indicate scene changes in the dialogue by including a line that starts with "Location:", and mid-dialogue headings with a line that starts with "Heading:". For example, the following text:',a.a.createElement("blockquote",null,"Location: Dwarfs’ Mine - Campsite ",a.a.createElement("br",null),"Heading: —Day 2: Camp Vargas."),"will result in: ",a.a.createElement("br",null),a.a.createElement("img",{alt:"Heading types example",src:Ce})),a.a.createElement("li",null,a.a.createElement("strong",null,"Bold and italic text")," - Bold and italic text should be preserved when pasted in from a Word/Google document."),a.a.createElement("li",null,a.a.createElement("strong",null,"Links")," - Links should also be preserved when pasted in. Make sure every link is like an external one (i.e. with the https:// in front)."),a.a.createElement("li",null,a.a.createElement("strong",null,"Stories with multiple parts")," - To indicate that the story needs to be tabbed out into multiple parts like this:",a.a.createElement("br",null),a.a.createElement("img",{alt:"Different parts example",src:je}),a.a.createElement("br",null),'use a line that says "Part 1", "Part 2", etc. to indicate the dialogue following the line is in its own part:',a.a.createElement("blockquote",null,"Part 1",a.a.createElement("br",null),"Character: Some dialogue",a.a.createElement("br",null),"Part 2",a.a.createElement("br",null),"Character: Some more dialogue"),'If a story only has one part, do not specify "Part 1" in the text or the formatter will unnecessarily add code for the parts tabber.')),a.a.createElement("p",null,"Here's an example of a short dialogue:"),a.a.createElement("blockquote",null,"Bg 61291.png",a.a.createElement("br",null),"Location: Sports Field",a.a.createElement("br",null),a.a.createElement("strong",null,"Person A:")," This is a line said by Person A! Their line starts with their name followed by a colon.",a.a.createElement("br",null),a.a.createElement("strong",null,"Person B:")," This is a line said by another person!",a.a.createElement("br",null),"Heading: —A few days later. ",a.a.createElement("br",null),a.a.createElement("strong",null,"Person A:")," This is a third line from Person A."),a.a.createElement("p",null,"When characters have multiple lines at in a row, the following dialogue formats are accepted:"),a.a.createElement("blockquote",null,a.a.createElement("strong",null,"Person A:")," Line by person A",a.a.createElement("br",null),"Second line by person A (line doesn't begin with name)",a.a.createElement("br",null),a.a.createElement("strong",null,"Person B:")," Line by person B",a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement("strong",null,"Person A:")," Line by person A",a.a.createElement("br",null),a.a.createElement("strong",null,"Person A:")," Second line by person A (line begins with name)",a.a.createElement("br",null),a.a.createElement("strong",null,"Person B:")," Line by person B"),a.a.createElement("h3",null,"Details Tab"),a.a.createElement("p",null,"Fill in information about the chapter and its appearance on the wiki."),a.a.createElement("p",null,"Values should auto-fill based on previous input, if you allow websites to cache information in your browser's local storage."),a.a.createElement("h3",null,"Renders Tab"),a.a.createElement("p",null,"The renders tab should automatically display which characters are in the dialogue, with a text input next to each name. Fill in the file names of the renders that should be used for each character. (ex. Leona Dorm)"),a.a.createElement("p",null,"If the character is an NPC with no dedicated image, just leave the input blank and the parser will format the line with the code for NPCs."),a.a.createElement("p",null,"If you want to use more than one render per character in one chapter, please format each section of the chapter separately."),a.a.createElement("h3",{id:"tlNotesSection"},"TL Notes Tab"),a.a.createElement("p",null,"In the Text tab, you can mark the place the translation note refers to with a marker like this:"),a.a.createElement("blockquote",null,"Izumi: I don’t know if they’re Eden or oden[1] or what, but we can’t let them have their way in our territory[2]."),a.a.createElement("p",null,"You can have markers in the middle or end of the line, or even multiple markers in one line if needed."),a.a.createElement("p",null,"In the TL Notes tab, here's an example of how the notes should be formatted:"),a.a.createElement("blockquote",null,a.a.createElement("ol",null,a.a.createElement("li",null,"Place translator notes in a numbered list like this."),a.a.createElement("li",null,"Make sure the numbers correspond to each marker!"))),a.a.createElement("ul",null,a.a.createElement("li",null,"The formatter identifies TL notes by looking for numbers at the beginning of a paragraph."),a.a.createElement("li",null,a.a.createElement("strong",null,"The TL notes can also be in an actual ordered list, which is preferable.")," ","You can use the editor to format the list:"),a.a.createElement("img",{alt:"how to create the list with the editor",src:Ae}))),a.a.createElement("footer",null))}n(212);var Ne=Object(o.hot)((function(){return a.a.createElement(c.a,{basename:"/"},a.a.createElement(u,null),a.a.createElement(i.c,null,a.a.createElement(i.a,{exact:!0,path:"/"},a.a.createElement(ve,null)),a.a.createElement(i.a,{exact:!0,path:"/howto"},a.a.createElement(Le,null))))}));Object(l.render)(a.a.createElement(Ne,null),document.querySelector("#root"))}});